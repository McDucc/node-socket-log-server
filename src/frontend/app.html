<html>

<head>
    <script defer src="https://unpkg.com/alpinejs@3.2.4/dist/cdn.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body
    x-data="{ autoUpdate: true, timeframe_type: 0, authenticated:0, showModal:false, username: '', password: '', server_health: false, metrics: ['ping', 'cpu', 'ram', 'disk']}"
    style="background-color: #19222b; color: #dee2e6;">
    <div class="modal-overlay" x-show="showModal"></div>
    <div class="modalx bd-example" x-show="showModal">

        <p class="">Please enter your credentials: </p>

        <p class="mt-2">Username: </p>
        <input class="form-control" type="text" x-model="username">
        <p class="mt-2">Password: </p>
        <input class="form-control" type="text" x-model="password">
        <div class="mt-4">
            <button class="btn btn-primary" @click="showModal = false">Close</button>
        </div>
    </div>
    <div class="col-md-11 mt-3" style="margin: auto; "><a
            style="font-size: xx-large; font-weight: bold; color: #0d5dd6;">Socket</a><a
            style="font-size: xx-large; font-weight: bold;">Logger</a>
        <div class="bd-example row col-md-12 mt-4" style="margin: auto;">
            <div class="row mt-2">
                <div class="col-md-12">
                    <button class="alert btn btn-primary" style="float: left;"
                        x-on:click="showModal = true;">Authenticate
                    </button>

                    <button class="alert btn btn-primary" style="float: right;"
                        x-on:click="server_health = !server_health;">Server
                        Health
                    </button>
                    <div class="alert alert-danger ms-4" style="float: left;" x-show="authenticated == 1">Supplied
                        credentials seem to be incorrect.
                    </div>
                    <div class="alert alert-dark ms-4 alm" style="float: left;" x-show="authenticated == 2">
                        Authenticated successfully.</div>
                </div>
            </div>
            <div class=" row mt-2">
                <div class="col-md-3">
                    <p>Search Term:</p>
                    <input class="form-control" type="text">
                    <button class="btn btn-primary form-control mt-2" x-bind:disabled="autoUpdate">Search</button>
                </div>
                <div class="col-md-3">
                    <p>Update Speed:</p>
                    <select class="form-control mt-2">
                        <option value="5">5 seconds</option>
                        <option value="10" selected>10 seconds</option>
                        <option value="15">15 seconds</option>
                        <option value="30">30 seconds</option>
                        <option value="60">1 minute</option>
                    </select>
                    <button class="btn btn-primary form-control mt-2" x-on:click="autoUpdate = !autoUpdate"
                        x-show="autoUpdate">Auto-Update active</button>
                    <button class="btn btn-secondary form-control mt-2" x-on:click="autoUpdate = !autoUpdate"
                        x-show="!autoUpdate">Auto-Update stopped</button>
                </div>
                <div class="col-md-3">
                    <p>Timeframe-Type:</p>
                    <select x-model="timeframe_type" class="form-control mt-2">
                        <option value="0" selected>Messages since</option>
                        <option value="1">Messages within Timeframe</option>
                    </select>
                    <div x-show="timeframe_type == 0">
                        <select class="form-control mt-2">
                            <option value="1" selected>1 minute</option>
                            <option value="2">2 minutes</option>
                            <option value="5">5 minutes</option>
                            <option value="10">10 minutes</option>
                            <option value="15">15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                            <option value="120">2 hours</option>
                            <option value="240">4 hours</option>
                            <option value="480">8 hours</option>
                            <option value="99999">All time</option>
                        </select>
                    </div>
                    <div x-show="timeframe_type == 1">
                        <input class="form-control mt-1" type="datetime-local" value="2015-01-02T11:42:13">
                        <input class="form-control mt-1" type="datetime-local" value="2015-01-02T11:42:13">
                    </div>
                </div>
                <div class="col-md-3"
                    x-data="{ servers: [{name: 'server1', ping: 12}, {name: 'server2', ping: 22}, {name: 'server3', ping: 15}, {name: 'server3', ping: 15}, {name: 'server3', ping: 15}, {name: 'server3', ping: 15}] }">
                    <p>Filter by Server:</p>
                    <select class="form-control mt-2" multiple>
                        <template x-for="server in servers">
                            <option x-bind:value="server.name" x-text="server.name"></option>
                        </template>
                    </select>
                </div>
            </div>
        </div>
        <div class="bd-example row col-md-12 mt-4" style="margin: auto; font-size: 15px; font-family: monospace;"
            x-show="server_health" x-data="{servers: [{name: 'server1',
            ping: [33,22,120,32,44,55,77,23,43,24,24,9], ping_max:120, ping_stamps:['17.09 12:00','17.09 18:00','18.09 00:00','18.09 06:00','18.09 12:00','18.09 18:00','19.09 00:00','19.09 06:00','19.09 12:00','19.09 18:00','20.09 00:00','20.09 06:00'],
            ram:  [12,12,12,12,12,12,12,12,12,12,12,12], ram_max:12,   ram_stamps:['17.09 12:00','19.09 12:00'],
            cpu:  [12,12,12,12,12,12,12,12,12,12,12,12], cpu_max:12,   cpu_stamps:['17.09 12:00','19.09 12:00'],
            disk: [12,12,12,12,12,12,12,12,12,12,12,12], disk_max:12,  disk_stamps:['17.09 12:00','19.09 12:00']}]}">
            <template x-for="server in servers">
                <div class="bd-example col-md-12 mt-2">
                    <div x-text="server.name" style="text-align: center;"></div>
                    <template x-for="metric in metrics">
                        <div style=" float: left; padding: 5px;" class="col-md-3">
                            <canvas :id="metric"></canvas>
                            <button
                                @click="makeChart(server[metric], metric, server[metric+'_stamps'])">Generate</button>
                        </div>
                    </template>
                </div>
            </template>
        </div>
        <div class="bd-example row col-md-12 mt-4" style="margin: auto; font-size: 15px; font-family: monospace;"
            x-show="!server_health">
            <div class="btn btn-primary alx">
                &lt;
            </div>
            <div class="btn btn-primary alx">
                1
            </div>
            <div class="btn btn-primary alx">
                ...
            </div>
            <div class="btn btn-primary alx">
                12
            </div>
            <div class="btn btn-primary alx">
                ...
            </div>
            <div class="btn btn-primary alx">
                23
            </div>
            <div class="btn btn-primary alx">
                &gt;
            </div>
            <div class="alert alert-dark alm">
                <b>Datetime:</b> 2021-08-01 00:00:00.333<br>
                <b>Message:</b> Example Message Example Message<br>
                <b>Level:</b> Info<br>
                <b>Server:</b> Server 4<br>
                <b>Data:</b><br> Example Message Example Message<br>
            </div>
            <div class="alert alert-danger">
                <b>Datetime:</b> 2021-08-01 00:00:00.333<br>
                <b>Message:</b> Example Message Example Message<br>
                <b>Level:</b> Critical<br>
                <b>Server:</b> Server 4<br>
                <b>Data:</b><br> Example Message Example Message<br>
            </div>
        </div>
    </div>
    <script>
        function authenticate() {
            alert('SUSUSUS');
        }
    </script>
    <script>
        function makeChart(xdata, metricName, labels) {
            let context = document.getElementById(metricName).getContext('2d');
            let myChart = new Chart(context, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: metricName,
                        data: xdata,
                        fill: true,
                        backgroundColor: 'rgb(35, 132, 132)',
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                },
            });
        }
    </script>
    <style>
        .btn-primary {
            background-color: #07429b;
            border-color: #07429b;
        }

        .alert-danger {
            color: #dee2e6;
            background-color: #80343a;
        }

        .alm {
            background-color: #414549;
            color: #dee2e6;
        }

        .alx {
            background-color: #07429b;
            color: #dee2e6;
            width: auto !important;
            margin-bottom: 2em !important;
            margin-right: 0.25em !important;
        }

        .bd-example {
            position: relative;
            padding: 1rem;
            margin: 1rem -.75rem 0;
            border: solid #dee2e6;
            border-width: 1px 0 0
        }

        .bd-example::after {
            display: block;
            clear: both;
            content: ""
        }

        @media (min-width: 576px) {
            .bd-example {
                padding: 1.5rem;
                margin-right: 0;
                margin-left: 0;
                border-width: 1px;
                border-top-left-radius: .25rem;
                border-top-right-radius: .25rem
            }
        }

        .bd-example+p {
            margin-top: 2rem
        }

        .modalx {
            z-index: 100;
            width: 360px;
            height: 300px;
            position: absolute;
            left: 50%;
            top: 200;
            margin-left: -180px;
            margin-top: -150px;
            padding: 15px;
            background-color: rgb(33, 33, 33);
        }

        .modal-overlay {
            background: #19222b;
            opacity: 0.3;
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 99;
        }
    </style>
</body>

</html>